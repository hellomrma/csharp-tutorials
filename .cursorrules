# Cursor Rules - Unity C# Tutorial 프로젝트

## 프로젝트 개요

이 프로젝트는 Unity C# 프로그래밍 튜토리얼 웹사이트입니다.
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Markdown 기반 콘텐츠 (43개 튜토리얼)
- 다국어 지원 (한국어/영어)

## 응답 언어

항상 한국어로 응답하세요.

## 코딩 스타일

### TypeScript
- 명시적 타입 정의 사용
- interface 선호 (객체 타입 정의 시)
- any 타입 지양
- 유틸리티 함수는 lib/ 디렉토리에 배치

### React/Next.js
- 서버 컴포넌트 우선 사용 (App Router)
- 클라이언트 컴포넌트 필요 시 'use client' 명시
- 컴포넌트는 app/components/에 배치
- PascalCase 컴포넌트 명명

### CSS
- Tailwind CSS 유틸리티 클래스 사용
- 커스텀 스타일은 globals.css에 정의

### 파일 명명
- 컴포넌트: PascalCase.tsx
- 유틸리티: camelCase.ts
- 튜토리얼: XX-제목.md (XX는 순서 번호)

## 디렉토리 구조

```
app/                    # Next.js App Router
├── components/         # React 컴포넌트
├── tutorials/[...slug]/ # 동적 튜토리얼 라우트
content/docs/           # 튜토리얼 마크다운
lib/                    # 유틸리티 함수
```

## 주요 파일

- lib/markdown.ts: MD 파싱 및 HTML 변환
- lib/i18n.ts: 다국어 번역
- lib/terms.ts: 용어 자동 변환 사전
- lib/cache.ts: 캐싱 시스템

## 튜토리얼 작성

새 튜토리얼 추가 시:
1. content/docs/에 XX-제목.md 생성
2. frontmatter 필수: title, description
3. 영문 버전: XX-제목.en.md

frontmatter 예시:
```yaml
---
title: "제목"
titleEn: "Title"
category: "기초"
categoryEn: "Basics"
description: "설명"
descriptionEn: "Description"
slugEn: "english-slug"
---
```

## 명령어

```bash
npm run dev    # 개발 서버
npm run build  # 빌드
npm run lint   # 린트 검사
```

## 주의사항

- content/docs/ 파일명의 숫자가 정렬 순서 결정
- 용어 자동 변환은 코드 블록에서 제외됨
- SSG (정적 사이트 생성) 사용
- 새 튜토리얼 추가 시 자동으로 홈페이지에 표시됨

## 코드 품질

- ESLint 규칙 준수
- TypeScript strict 모드 사용
- 불필요한 console.log 제거
- 에러 핸들링 포함

## 에러 처리

### 클라이언트 컴포넌트
- try-catch 블록 사용
- 사용자 친화적인 에러 메시지 표시
- 에러 바운더리 활용 (error.tsx)

### 서버 컴포넌트
- 명시적 에러 핸들링
- notFound() 함수로 404 처리
- 개발 환경에서 상세 에러 로그

예시:
```typescript
// 서버 컴포넌트
if (!tutorial) {
  notFound();
}

// 클라이언트 컴포넌트
try {
  // 작업 수행
} catch (error) {
  console.error('Error:', error);
  // 사용자에게 에러 표시
}
```

## 성능 최적화

### 캐싱
- `lib/cache.ts` 캐싱 시스템 활용
- 반복 데이터 로드 방지
- 프로덕션에서 무제한 캐싱, 개발에서 TTL 5분

### Next.js 최적화
- 서버 컴포넌트 우선 사용 (데이터 fetching)
- 클라이언트 컴포넌트 최소화 (상태 관리만)
- `use client`는 필요한 컴포넌트에만 사용
- 동적 import로 코드 스플리팅

### 이미지 최적화
- Next.js Image 컴포넌트 사용
- width, height 명시
- 적절한 format (webp)

## 접근성 (a11y)

- 시맨틱 HTML 사용 (`<article>`, `<nav>`, `<main>`)
- aria-label 적절히 사용
- 키보드 네비게이션 지원 (Tab, Enter)
- 색상 대비 4.5:1 이상 유지
- alt 텍스트 필수 (이미지)

예시:
```tsx
<button aria-label="언어 전환">
  <LanguageIcon />
</button>
```

## Git 커밋 컨벤션

Conventional Commits 형식 권장:

```
<type>(<scope>): <subject>

<body>
```

### Type
- `feat`: 새로운 기능
- `fix`: 버그 수정
- `docs`: 문서 변경
- `style`: 코드 포맷팅 (기능 변경 없음)
- `refactor`: 리팩토링
- `perf`: 성능 개선
- `test`: 테스트 추가/수정
- `chore`: 빌드, 설정 변경

예시:
```
feat(tutorials): 45번 튜토리얼 추가

밤송이 던지기 게임 튜토리얼 작성
- 한국어/영어 버전 포함
- 소스 코드 예제 추가
```

한국어 커밋 메시지 사용 가능:
```
기능: 튜토리얼 검색 기능 추가
수정: 캐싱 버그 해결
```

## 테스트 작성 가이드

향후 테스트 추가 시 가이드라인:

### 단위 테스트
- 유틸리티 함수 테스트 (`lib/` 디렉토리)
- 순수 함수 우선 테스트
- Jest + React Testing Library 사용

### 통합 테스트
- 페이지 렌더링 테스트
- 다국어 전환 테스트
- 네비게이션 테스트

## 보안 가이드라인

### XSS 방지
- 사용자 입력 sanitize
- `dangerouslySetInnerHTML` 최소 사용
- HTML은 `rehype-sanitize` 사용

### 환경 변수 보호
- 민감 정보는 환경 변수로
- `.env.local`은 `.gitignore`에 포함
- `NEXT_PUBLIC_` 접두사는 공개 가능한 정보만

### 의존성 관리
- `npm audit` 정기 실행
- 취약점 발견 시 즉시 업데이트
- 신뢰할 수 있는 패키지만 설치

## 코드 리뷰 체크리스트

리뷰어와 작성자 모두 확인:
- [ ] TypeScript 타입 에러 없음
- [ ] ESLint 경고 없음
- [ ] 불필요한 console.log 제거
- [ ] 에러 핸들링 구현
- [ ] 반응형 디자인 테스트
- [ ] 다국어 지원 확인 (한국어/영어)
- [ ] 접근성 검토 (키보드, 스크린리더)
- [ ] 성능 영향 검토
